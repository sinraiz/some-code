This code implements a lock-free stack using native Win32 interlocked operations. 

The stack is defined as a template in lockfree.h and a performance test for it is called from main.cpp.

This code was a part of my article on Habrahabr (Russian Online Tech Community) which you can find here:
https://habrahabr.ru/post/223361/

There're also some nice charts in the article, however the article's text is in Russian unfortunately